{"version":3,"sources":["../src/script.js"],"names":["factory","define","amd","exports","module","window","SearchBox","options","wrapperClass","$wrapper","document","getElementsByClassName","mainClass","buttonText","placeholderText","completeMinSymbols","showHintsClass","init","innerHTML","event","preventDefault","$hints","$hintsWrapper","$box","classList","add","remove","$input","$inputWrapper","$clearButton","submitHandler","bind","inputHandler","addEventListener","value","focus","completeEvent","CustomEvent","detail","length","dispatchEvent","hideHints","clearHints","state","onFocusClass","setTimeout","notEmptyClass"],"mappings":"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","sourcesContent":["(function (factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define([], factory);\r\n    } else if (typeof exports === \"object\") {\r\n        // Node/CommonJS\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals\r\n        window.SearchBox = factory();\r\n    }\r\n})(function () {\r\n\r\n    class SearchBox {\r\n\r\n        /* Example options\r\n        {\r\n            wrapperClass:'search',     // String\r\n            $wrapper: document.getElementsByClassName(this.formClass)[0],       // node element\r\n            mainClass:'search-box',     // String\r\n            buttonText:'Найти',     // String\r\n            placeholderText:'Поиск',     // String\r\n            completeMinSymbols:3,     // String\r\n            showHintsClass: 'search-box--open'\r\n        }\r\n         */\r\n\r\n        constructor(options) {\r\n            this.wrapperClass = options && options.wrapperClass ? options.wrapperClass : 'search';\r\n            this.$wrapper = options && options.$wrapper ? options.$wrapper : document.getElementsByClassName(this.wrapperClass)[0];\r\n            this.mainClass = options && options.mainClass ? options.mainClass : 'search-box';\r\n            this.buttonText = options && options.buttonText ? options.buttonText : 'Найти';\r\n            this.placeholderText = options && options.placeholderText ? options.placeholderText : 'Поиск';\r\n            this.completeMinSymbols = options && options.completeMinSymbols ? options.completeMinSymbols : 3;\r\n            this.showHintsClass = options && options.showHintsClass ? options.showHintsClass : this.mainClass + '--open';\r\n\r\n            this.init();\r\n        }\r\n\r\n        init() {\r\n            this.$wrapper.innerHTML = this.#createDom();\r\n            this.#setup();\r\n        }\r\n\r\n        #createDom() {\r\n            return `\r\n                <form action class=\"${this.mainClass}\" role=\"search\"> \r\n                    <div class=\"${this.mainClass}__input-wrapper\" tabindex=\"1\">\r\n                        <input type=\"search\" class=\"${this.mainClass}__input\" placeholder=\"${this.placeholderText}\">\r\n                        <div class=\"${this.mainClass}__clear-button\"></div>\r\n                        <div class=\"${this.mainClass}__hints\"></div>\r\n                    </div>\r\n                    <div class=\"${this.mainClass}__back-button\"></div>\r\n                    <button type=\"submit\" class=\"${this.mainClass}__button\">${this.buttonText}</button>\r\n                </form>            \r\n            `;\r\n        }\r\n\r\n        #setup() {\r\n            this.$box = this.$wrapper.getElementsByClassName(this.mainClass)[0];\r\n            this.$input = this.$wrapper.getElementsByClassName(this.mainClass + '__input')[0];\r\n            this.$inputWrapper = this.$wrapper.getElementsByClassName(this.mainClass + '__input-wrapper')[0];\r\n            this.$clearButton = this.$wrapper.getElementsByClassName(this.mainClass + '__clear-button')[0];\r\n            this.$hintsWrapper = this.$wrapper.getElementsByClassName(this.mainClass + '__hints')[0];\r\n            this.submitHandler = this.submitHandler.bind(this);\r\n            this.inputHandler = this.inputHandler.bind(this);\r\n            this.$box.addEventListener('submit', this.submitHandler);\r\n            this.$input.addEventListener('input', this.inputHandler);\r\n            this.$clearButton.addEventListener('click', () => {\r\n                this.$input.value = '';\r\n                this.#toggleClearButton();\r\n                this.$input.focus();\r\n            });\r\n\r\n            this.$inputWrapper.addEventListener('focusin', () => {\r\n                this.#toggleFocusClass(true);\r\n            });\r\n\r\n            this.$inputWrapper.addEventListener('focusout', () => {\r\n                this.#toggleFocusClass(false);\r\n            });\r\n        }\r\n\r\n        submitHandler(event) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        inputHandler() {\r\n            this.#toggleClearButton();\r\n            this.#inputEventHandler();\r\n        }\r\n\r\n        #inputEventHandler() {\r\n            this.completeEvent = new CustomEvent('completeHint', {\r\n                detail: {value: this.$input.value}\r\n            });\r\n\r\n            let length = this.$input.value.length;\r\n            if (length >= this.completeMinSymbols) {\r\n                this.$wrapper.dispatchEvent(this.completeEvent);\r\n            } else {\r\n                this.hideHints();\r\n                this.clearHints();\r\n            }\r\n        }\r\n\r\n        #toggleFocusClass(state) {\r\n            let onFocusClass = this.mainClass + '--on-focus';\r\n\r\n            if (state) {\r\n                this.$box.classList.add(onFocusClass);\r\n            } else {\r\n                this.$box.classList.remove(onFocusClass);\r\n                setTimeout(()=>{\r\n                    this.hideHints();\r\n                },100)\r\n            }\r\n        }\r\n\r\n        #toggleClearButton() {\r\n            let length = this.$input.value.length;\r\n            let notEmptyClass = this.mainClass + '--not-empty';\r\n\r\n            if (length > 0) {\r\n                this.$box.classList.add(notEmptyClass);\r\n            } else {\r\n                this.$box.classList.remove(notEmptyClass);\r\n            }\r\n        }\r\n\r\n        showHints($hints) {\r\n            this.$hintsWrapper.innerHTML = $hints;\r\n            this.$box.classList.add(this.showHintsClass);\r\n        }\r\n\r\n        hideHints() {\r\n            this.$box.classList.remove(this.showHintsClass);\r\n        }\r\n\r\n        clearHints() {\r\n            this.$hintsWrapper.innerHTML = '';\r\n        }\r\n    }\r\n\r\n    return SearchBox;\r\n});\r\n"],"file":"script.js"}