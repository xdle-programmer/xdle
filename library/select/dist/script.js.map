{"version":3,"sources":["../src/script.js"],"names":["factory","define","amd","exports","module","window","Select","options","selectClass","$select","document","getElementsByClassName","customSelectClass","openClass","itemClass","selectedItemClass","disabledItemClass","$customSelect","createElement","current","Array","from","getElementsByTagName","changeEvent","Event","data","init","parentElement","appendChild","classList","add","event","isSelectClick","click","closest","target","type","dataset","selectType","toggle","contains","select","selectIndex","close","map","item","index","value","hasAttribute","getAttribute","innerText","dispatchEvent","open","remove","optionsArray","Map","option","name","selected","disabled","hidden","set","get","list","values","classDisabled","classSelected","template","insertAdjacentHTML","clickHandler","bind","changeHandler","addEventListener","$name","querySelector","$items","querySelectorAll","forEach","$item"],"mappings":"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","sourcesContent":["(function (factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define([], factory);\r\n    } else if (typeof exports === \"object\") {\r\n        // Node/CommonJS\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals\r\n        window.Select = factory();\r\n    }\r\n})(function () {\r\n    class Select {\r\n\r\n        /* Example options\r\n        {\r\n            selectClass:'select',     // String\r\n            $select:document.getElementsByClassName(this.selectClass)[0],       // node element\r\n            customSelectClass:'custom-select',     // String\r\n        }\r\n         */\r\n\r\n        constructor(options) {\r\n            this.selectClass = options && options.selectClass ? options.selectClass : 'select';\r\n            this.$select = options && options.$select ? options.$select : document.getElementsByClassName(this.selectClass)[0];\r\n            this.customSelectClass = options && options.customSelectClass ? options.customSelectClass : 'custom-select';\r\n            this.openClass = options && options.openClass ? options.openClass : this.customSelectClass + '--open';\r\n            this.itemClass = options && options.itemClass ? options.itemClass : this.customSelectClass + '__item';\r\n            this.selectedItemClass = options && options.selectedItemClass ? options.selectedItemClass : this.itemClass + '--selected';\r\n            this.disabledItemClass = options && options.disabledItemClass ? options.disabledItemClass : this.itemClass + '--disabled';\r\n            this.$customSelect = document.createElement('div');\r\n            this.current = null;\r\n            this.options = Array.from(this.$select.getElementsByTagName('option'));\r\n            this.changeEvent = new Event('change');\r\n            this.data = this.#getSelectData();\r\n            this.init();\r\n        }\r\n\r\n        init() {\r\n            this.$select.parentElement.appendChild(this.$customSelect);\r\n            this.$customSelect.classList.add(this.customSelectClass);\r\n            this.$customSelect.appendChild(this.$select);\r\n            this.#setHtml();\r\n        }\r\n\r\n        #getSelectData() {\r\n            this.options = Array.from(this.$select.getElementsByTagName('option'));\r\n            let optionsArray = new Map();\r\n\r\n            this.options.map((item, index) => {\r\n                let value = item.hasAttribute('value') ? item.getAttribute('value') : item.innerText;\r\n\r\n                if (item.hasAttribute('selected')) {\r\n                    this.current = index;\r\n                }\r\n\r\n                const option = {\r\n                    name: item.innerText,\r\n                    selected: item.hasAttribute('selected'),\r\n                    disabled: item.hasAttribute('disabled'),\r\n                    hidden: item.hasAttribute('hidden'),\r\n                    index: index\r\n                };\r\n\r\n                optionsArray.set('index' + option.index, option);\r\n            });\r\n\r\n            if (this.current === null) {\r\n                this.current = optionsArray.get('index' + 0).index;\r\n            }\r\n            return optionsArray;\r\n        }\r\n\r\n        #setHtml() {\r\n            let list = '';\r\n\r\n            for (let item of this.data.values()) {\r\n                if (!item.hidden) {\r\n                    let classDisabled = '';\r\n                    let classSelected = '';\r\n\r\n                    if (item.selected) {\r\n                        classSelected = this.selectedItemClass;\r\n                    }\r\n\r\n                    if (item.disabled) {\r\n                        classDisabled = this.disabledItemClass;\r\n                    }\r\n\r\n                    list += `<div data-select-index=\"${item.index}\" data-select-type=\"value\" class=\"${this.customSelectClass}__item ${classDisabled}\">${item.name}</div>`;\r\n                }\r\n            }\r\n\r\n            const template = `\r\n            <div data-select-type=\"button\" class=\"${this.customSelectClass}__input\">\r\n                <div data-select-type=\"button\" class=\"${this.customSelectClass}__input-name\">${this.data.get('index' + this.current).name}</div>\r\n                <div data-select-type=\"button\" class=\"${this.customSelectClass}__input-icon\"></div>\r\n            </div>\r\n            <div data-select-type=\"button\" class=\"${this.customSelectClass}__list\">\r\n                ${list}\r\n            </div>\r\n        `;\r\n\r\n            this.$customSelect.insertAdjacentHTML('beforeEnd', template);\r\n\r\n            this.#setup();\r\n        }\r\n\r\n        #setup() {\r\n            this.clickHandler = this.clickHandler.bind(this);\r\n            this.changeHandler = this.changeHandler.bind(this);\r\n            document.addEventListener('click', this.clickHandler);\r\n            this.$select.addEventListener('change', this.changeHandler);\r\n            this.$name = this.$customSelect.querySelector('.' + this.customSelectClass + '__input-name');\r\n            this.$items = this.$customSelect.querySelectorAll('.' + this.customSelectClass + '__item');\r\n        }\r\n\r\n        clickHandler(event) {\r\n            const isSelectClick = (click) => {\r\n                if (click === this.$customSelect) {\r\n                    return true;\r\n                } else if (click.closest('.' + this.customSelectClass) && click.closest('.' + this.customSelectClass) === this.$customSelect) {\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            };\r\n\r\n            if (isSelectClick(event.target)) {\r\n                const type = event.target.dataset.selectType;\r\n                if (type === 'button') {\r\n                    this.toggle();\r\n                } else if (type === 'value') {\r\n                    if (!event.target.classList.contains(this.disabledItemClass)) {\r\n                        this.select(event.target.dataset.selectIndex);\r\n                        this.close();\r\n                    }\r\n                }\r\n            } else {\r\n                this.close();\r\n            }\r\n        }\r\n\r\n        changeHandler(event) {\r\n            this.options = Array.from(this.$select.getElementsByTagName('option'));\r\n\r\n            this.options.map((item, index) => {\r\n                let value;\r\n\r\n                if (item.hasAttribute('value')) {\r\n                    value = item.getAttribute('value');\r\n                } else {\r\n                    value = item.innerText;\r\n                }\r\n\r\n                if (value === this.$select.value) {\r\n                    this.#setSelectHtml(index);\r\n                }\r\n            });\r\n        }\r\n\r\n        select(index) {\r\n            this.current = index;\r\n            this.#setSelectHtml(index);\r\n            this.$select.value = this.options[index].value;\r\n            this.$select.dispatchEvent(this.changeEvent);\r\n        }\r\n\r\n        #setSelectHtml(index) {\r\n            this.$name.innerText = this.data.get('index' + index).name;\r\n\r\n            this.$items.forEach(($item) => {\r\n                if ($item.dataset.selectIndex === index) {\r\n                    $item.classList.add(this.selectedItemClass);\r\n                } else {\r\n                    $item.classList.remove(this.selectedItemClass);\r\n                }\r\n            });\r\n        }\r\n\r\n        toggle() {\r\n            if (this.$customSelect.classList.contains(this.openClass)) {\r\n                this.close();\r\n            } else {\r\n                this.open();\r\n            }\r\n        }\r\n\r\n        open() {\r\n            this.$customSelect.classList.add(this.openClass);\r\n        }\r\n\r\n        close() {\r\n            this.$customSelect.classList.remove(this.openClass);\r\n        }\r\n\r\n        // TODO: Сделать рефреш\r\n    }\r\n\r\n    return Select;\r\n});\r\n"],"file":"script.js"}